---
import { viewportStore } from "../../../../../store/storykeep.ts";
import Node from "../../../../storykeep/compositor-nodes/Node.astro";
import { getCtx } from "../../../../../store/nodes";
import type { FlatNode } from "../../../../../types";
import EmptyNode from "./EmptyNode.astro";

const { nodeId } = Astro.props;
const node = getCtx().allNodes.get().get(nodeId) as FlatNode;
const Tag = node.tagName || EmptyNode;
---

<Tag class={getCtx().getNodeClasses(nodeId, viewportStore.get().value)}>
  {getCtx().getChildNodeIDs(nodeId).map((id) => <Node nodeId={id} />)}
</Tag>
